[["Map",1,2,9,10,71,72],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.13.7","content-config-digest","89219fa5f2bbce1e","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"site\":\"https://www.caseyjdavis.com\",\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"ignore\",\"output\":\"static\",\"scopedStyleStrategy\":\"attribute\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{},\"image\":{\"endpoint\":{\"route\":\"/_image\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":{\"type\":\"shiki\",\"excludeLangs\":[\"math\"]},\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"css-variables\",\"themes\":{},\"wrap\":false,\"transformers\":[]},\"remarkPlugins\":[],\"rehypePlugins\":[],\"remarkRehype\":{},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"staticImportMetaEnv\":false,\"chromeDevtoolsWorkspace\":false},\"legacy\":{\"collections\":false}}","projects",["Map",11,12,21,22,31,32,41,42,51,52,61,62],"dotfiles",{"id":11,"data":13,"body":16,"filePath":17,"digest":18,"legacyId":19,"deferredRender":20},{"title":11,"date":14,"description":15},["Date","2012-03-02T00:00:00.000Z"],"My personal Linux dotfiles","## Intro\r\n\r\nImagine your computer as a meticulously organized workshop, where every tool is precisely placed, every setting is optimized, and everything works exactly the way you want. In the world of Linux, this digital workshop is crafted through something seemingly mundane yet incredibly powerful: dotfiles.\r\nDotfiles are the secret sauce of Linux customization, hiding in plain sight within your home directory. Easily recognizable by their leading dot (.), these configuration files are the invisible architects of your computing environment. They control everything from your shell's behavior and terminal appearance to application settings and system preferences. What might look like simple text files are actually the blueprint of your personalized digital workspace.\r\nWhether you're a seasoned developer, a Linux enthusiast, or a curious newcomer, understanding dotfiles can transform how you interact with your computer. They're not just files‚Äîthey're a reflection of your unique workflow, a testament to the incredible flexibility that makes Linux such a powerful operating system.\r\n\r\n## Github Repository\r\n\r\nGithub Link ‚û°Ô∏è [Casey's dotfiles](https://github.com/caseyjdavis/dotfiles)","src/content/projects/dotfiles/index.mdx","457783598079a5cd","dotfiles/index.mdx",true,"markdown-resume",{"id":21,"data":23,"body":27,"filePath":28,"digest":29,"legacyId":30,"deferredRender":20},{"title":24,"date":25,"description":26},"Markdown Resume",["Date","2025-03-12T00:00:00.000Z"],"Generate a clean resume from a markdown file","// import MdxPublicImage from \"@/components/MdxPublicImage.astro\";\r\n\r\n## Intro\r\n\r\nI needed to generate current resume and wanted to use Markdown to keep it simple and version controlled. I found several examples online and decided to create my own version. This project uses pandoc to convert a markdown file to a pdf file. I also used weasyprint to add a css stylesheet to the pdf file. This is an example of how pandoc styled the file using a custom css stylesheet:\r\n\r\n![Resume Example](./resume-example.png)\r\n\r\n## Requirements\r\n\r\nI run an instance of Ubuntu 24.04 in Windows Subsystem for Linux (WSL) and used the following packages:\r\n\r\n- pandoc\r\n- weasyprint\r\n\r\n## Installation\r\n\r\nInstall requirements, I was able to do this easily in Ubuntu with the following commands:\r\n\r\n```bash\r\nsudo apt install pandoc weasyprint -y\r\n```\r\nThen clone this repository to your local machine\r\n```bash\r\ngit clone https://github.com/caseyjdavis/resume.git\r\n```\r\n## Customization\r\n\r\nEdit the resume.md file to include your information. You can also edit the resume-css-stylesheet.css file to change the styling of the pdf file. The beauty of this project is that you can easily version control your resume and make changes as needed.\r\n\r\n## Output\r\n\r\nOnce you are happy with your resume, run the following command to generate the pdf file:\r\n\r\n```bash\r\npandoc resume.md -o resume.pdf --pdf-engine=weasyprint --css resume-css-stylesheet.css\r\n```\r\n\r\n## Finished product\r\n\r\nPandoc will export a finished resume.pdf file in the current folder\r\n\r\n![Resume Output](./resume-output.png)","src/content/projects/markdown-resume/index.mdx","2fbee11231b1b8e9","markdown-resume/index.mdx","nv9p",{"id":31,"data":33,"body":37,"filePath":38,"digest":39,"legacyId":40,"deferredRender":20},{"title":34,"date":35,"description":36},"NV9P Amateur Radio",["Date","2017-02-20T00:00:00.000Z"],"My personal ham radio website","## Intro\r\n\r\nAmateur radio caught my eye in 2013 and I had no idea how unforgivingly difficult it would be for me muddling through every step of the way. There is an intense learning curve and oftentimes it takes me dozens of attempts before I get something even close to success. However it is really satisfying when you finally do make a breakthrough but be warned those are few and far between.\r\n\r\nüìª [NV9P Amateur Radio](https://www.nv9p.com)","src/content/projects/nv9p/index.mdx","06607bdbaaaff4ff","nv9p/index.mdx","vango",{"id":41,"data":43,"body":47,"filePath":48,"digest":49,"legacyId":50,"deferredRender":20},{"title":44,"date":45,"description":46},"Vincent Vango",["Date","2024-01-04T00:00:00.000Z"],"2020 Ford Transit Campervan Conversion","import Callout from \"@components/Callout.astro\";\r\n\r\n## Intro\r\n\r\nThis is my 2020 Ford Transit I purchased used at auction in northern Colorado. It was a Penske truck in its previous life. The van was a little scraped and dinged up but otherwise in fine shape considering its age. It was fleet maintained so there was always regularly scheduled oil changes and a new pair of front brake pads before I became the owner.\r\n\r\n## Before\r\n\r\n![Van as I received him April 2024](./vango-before.JPG)\r\n\r\n## After\r\n\r\n![Why yes that is a margarita machine](./vango-after.JPG)\r\n\r\n\u003CCallout type=\"error\">\r\nWhy yes, that IS a Jimmy Buffet Margaritaville Maker running off an extension cord from deep within the van.\r\n\u003C/Callout>\r\n\r\n## Vango Buildout Website\r\n\r\nI created a website to document the buildout of the van. You can view it below.\r\n[Vincent Vango Build Page](https://caseyjdavis.github.io/vango/)","src/content/projects/vango/index.mdx","6020537bd5cda232","vango/index.mdx","psappdeploytoolkit",{"id":51,"data":53,"body":57,"filePath":58,"digest":59,"legacyId":60,"deferredRender":20},{"title":54,"date":55,"description":56},"PSAppDeployToolkit",["Date","2016-06-04T00:00:00.000Z"],"Powershell App Deployment Toolkit","## Intro\r\n\r\nPSAppDeployToolkit is a versatile solution that streamlines and standardizes the process of software deployment, making it easier than ever to manage your IT environment. It has a comprehensive set of features, such as dynamic logging, user interaction capabilities, and customizable functionality.\r\n\r\n## Github Repository\r\n\r\nI developed a series of Powershell Application Deployment Toolkit scripts to install applications via Microsoft SCCM for computer imaging.\r\n\r\nGithub Link ‚û°Ô∏è [PSAppDeployToolkit](https://github.com/caseyjdavis/psappdeploytoolkit)\r\n\r\nThese packages were used to deploy software on 40,000 computers used throughout the Poudre School District located in Fort Collins, Colorado.","src/content/projects/psappdeploytoolkit/index.mdx","ced7eda052e3523c","psappdeploytoolkit/index.mdx","wsl-setup",{"id":61,"data":63,"body":67,"filePath":68,"digest":69,"legacyId":70,"deferredRender":20},{"title":64,"date":65,"description":66},"Windows Subsystem for Linux Ansible Playbook",["Date","2022-10-22T00:00:00.000Z"],"Scripting a full WSL installation","## What is Windows Subsystem for Linux?\r\n\r\nWSL is a powerful compatibility layer developed by Microsoft that allows users to run native Linux command-line tools and utilities directly on Windows, without the overhead of traditional virtual machines or dual-boot setups. It provides a lightweight, integrated experience that bridges the gap between Windows and Linux ecosystems.\r\n\r\nWhether you're a software engineer, a system administrator, or a tech enthusiast, Windows Subsystem for Linux represents a pivotal advancement in operating system interoperability, making cross-platform work more accessible and efficient than ever before.\r\n\r\n## Automated setup using Ansible\r\n\r\nHere is my Github repository that you clone into a fresh WSL install that will provision the virtual machine with packages, settings, locales, etc. It will clone my dotfiles as well and leave you with a completely up to date Ubuntu instance running Oh-My-Zsh, vim, npm and several other Linux tools.\r\n\r\nGithub Link ‚û°Ô∏è [Casey's WSL Setup](https://github.com/caseyjdavis/setup)","src/content/projects/WSL setup/index.mdx","90ed67f7716b57b4","WSL setup/index.mdx","blog",["Map",73,74,92,93,141,142,182,183],"migrating-blog",{"id":73,"data":75,"body":79,"filePath":80,"digest":81,"rendered":82,"legacyId":91},{"title":76,"date":77,"draft":78},"Migrating blog",["Date","2025-03-13T00:00:00.000Z"],false,"This is just a placeholder as I am moving over blog posts, staging them in dev and releasing them to my website as they get converted.","src/content/blog/migrating-blog/index.md","57cbbb299662e272",{"html":83,"metadata":84},"\u003Cp>This is just a placeholder as I am moving over blog posts, staging them in dev and releasing them to my website as they get converted.\u003C/p>",{"headings":85,"localImagePaths":86,"remoteImagePaths":87,"frontmatter":88,"imagePaths":90},[],[],[],{"title":76,"date":89,"draft":78},"2025-03-13",[],"migrating-blog/index.md","truenas-letsencrypt-ssl",{"id":92,"data":94,"body":97,"filePath":98,"assetImports":99,"digest":108,"rendered":109,"legacyId":140},{"title":95,"date":96,"draft":78},"Let's Encrypt SSL for TrueNAS",["Date","2025-03-24T00:00:00.000Z"],"## Introduction\r\n\r\nTrueNAS includes a built-in ACME DNS authenticator accessible through its web interface, enabling seamless generation of SSL certificates for the administrative portal. This guide outlines the steps to configure Cloudflare as an authenticator with Let's Encrypt for automated SSL certificate management in TrueNAS.\r\n\r\n## Update User Information\r\n\r\nBegin by updating a user account on your TrueNAS system with a valid email address. In this example, the root user is updated with an email address, which is a prerequisite for generating a certificate.\r\n\r\n![Update Cloudflare email for local user](./edit-user.png)\r\n\r\n## Configure ACME DNS Authenticator\r\n\r\nNext, configure a DNS authenticator. This guide uses Cloudflare as the DNS provider. Generate an API token with permissions to edit DNS zones, then name the authenticator and input the token in the API Token field. Note: If using an API token, you do not need to provide your Cloudflare email or API key.\r\n\r\n![Configuring ACME DNS Authenticator](./acme-dns-authenticator.png)\r\n\r\n## Create a Certificate Signing Request (CSR)\r\n\r\nProvide the necessary details for the Certificate Signing Request (CSR) to populate the certificate's information. Complete the required fields and save the CSR.\r\n\r\n![Creating a Certificate Signing Request in TrueNAS](./add-certificate-signing-request.png)\r\n\r\nAfter generating the CSR, click the wrench icon üîß in the web interface to open the wizard for certificate generation.\r\n\r\n![Certificate Signing Request Wizard in TrueNAS](./add-certificate-signing-request%2002.png)\r\n\r\n## Generate the SSL Certificate\r\n\r\nFor the identifier, use `letsencrypt`, accept the Terms of Service, and set the certificate to renew every 30 days (recommended for home lab environments). Select \"Production Directory,\" choose the domain, assign the authenticator, and save the configuration.\r\n\r\n![Generating Let's Encrypt Certificate for TrueNAS](./acme-certificate.png)\r\n\r\nA progress pop-up will display the status of the certificate provisioning. A successful DNS challenge will appear as shown below.\r\n\r\n![Successful DNS Challenge for Let's Encrypt](./dns-challenge.png)\r\n\r\n## Activate the New Certificate\r\n\r\nOnce the SSL certificate is generated, configure the TrueNAS web interface to use it. Navigate to System Settings > General > GUI > Settings. Select the new certificate from the dropdown menu, enable the \"HTTP > HTTPS Redirect\" option, and save the changes. The web interface will restart to apply the new settings.\r\n\r\n![Activate Let's Encrypt Certificate in TrueNAS](./gui-settings.png)\r\n\r\n## Verify the SSL Certificate\r\n\r\nTo confirm the certificate is active, click the lock icon in your browser's address bar. Verify that the certificate is issued by Let's Encrypt.\r\n\r\n![SSL Certificate Verification in TrueNAS](./ssl-verified.png)","src/content/blog/truenas-letsencrypt-ssl/index.md",[100,101,102,103,104,105,106,107],"./edit-user.png","./acme-dns-authenticator.png","./add-certificate-signing-request.png","./add-certificate-signing-request 02.png","./acme-certificate.png","./dns-challenge.png","./gui-settings.png","./ssl-verified.png","02c5a31b957d3b22",{"html":110,"metadata":111},"\u003Ch2 id=\"introduction\">Introduction\u003C/h2>\n\u003Cp>TrueNAS includes a built-in ACME DNS authenticator accessible through its web interface, enabling seamless generation of SSL certificates for the administrative portal. This guide outlines the steps to configure Cloudflare as an authenticator with Let‚Äôs Encrypt for automated SSL certificate management in TrueNAS.\u003C/p>\n\u003Ch2 id=\"update-user-information\">Update User Information\u003C/h2>\n\u003Cp>Begin by updating a user account on your TrueNAS system with a valid email address. In this example, the root user is updated with an email address, which is a prerequisite for generating a certificate.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./edit-user.png&#x22;,&#x22;alt&#x22;:&#x22;Update Cloudflare email for local user&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"configure-acme-dns-authenticator\">Configure ACME DNS Authenticator\u003C/h2>\n\u003Cp>Next, configure a DNS authenticator. This guide uses Cloudflare as the DNS provider. Generate an API token with permissions to edit DNS zones, then name the authenticator and input the token in the API Token field. Note: If using an API token, you do not need to provide your Cloudflare email or API key.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./acme-dns-authenticator.png&#x22;,&#x22;alt&#x22;:&#x22;Configuring ACME DNS Authenticator&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"create-a-certificate-signing-request-csr\">Create a Certificate Signing Request (CSR)\u003C/h2>\n\u003Cp>Provide the necessary details for the Certificate Signing Request (CSR) to populate the certificate‚Äôs information. Complete the required fields and save the CSR.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./add-certificate-signing-request.png&#x22;,&#x22;alt&#x22;:&#x22;Creating a Certificate Signing Request in TrueNAS&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Cp>After generating the CSR, click the wrench icon üîß in the web interface to open the wizard for certificate generation.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./add-certificate-signing-request 02.png&#x22;,&#x22;alt&#x22;:&#x22;Certificate Signing Request Wizard in TrueNAS&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"generate-the-ssl-certificate\">Generate the SSL Certificate\u003C/h2>\n\u003Cp>For the identifier, use \u003Ccode>letsencrypt\u003C/code>, accept the Terms of Service, and set the certificate to renew every 30 days (recommended for home lab environments). Select ‚ÄúProduction Directory,‚Äù choose the domain, assign the authenticator, and save the configuration.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./acme-certificate.png&#x22;,&#x22;alt&#x22;:&#x22;Generating Let&#x27;s Encrypt Certificate for TrueNAS&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Cp>A progress pop-up will display the status of the certificate provisioning. A successful DNS challenge will appear as shown below.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./dns-challenge.png&#x22;,&#x22;alt&#x22;:&#x22;Successful DNS Challenge for Let&#x27;s Encrypt&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"activate-the-new-certificate\">Activate the New Certificate\u003C/h2>\n\u003Cp>Once the SSL certificate is generated, configure the TrueNAS web interface to use it. Navigate to System Settings > General > GUI > Settings. Select the new certificate from the dropdown menu, enable the ‚ÄúHTTP > HTTPS Redirect‚Äù option, and save the changes. The web interface will restart to apply the new settings.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./gui-settings.png&#x22;,&#x22;alt&#x22;:&#x22;Activate Let&#x27;s Encrypt Certificate in TrueNAS&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"verify-the-ssl-certificate\">Verify the SSL Certificate\u003C/h2>\n\u003Cp>To confirm the certificate is active, click the lock icon in your browser‚Äôs address bar. Verify that the certificate is issued by Let‚Äôs Encrypt.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./ssl-verified.png&#x22;,&#x22;alt&#x22;:&#x22;SSL Certificate Verification in TrueNAS&#x22;,&#x22;index&#x22;:0}\">\u003C/p>",{"headings":112,"localImagePaths":135,"remoteImagePaths":136,"frontmatter":137,"imagePaths":139},[113,117,120,123,126,129,132],{"depth":114,"slug":115,"text":116},2,"introduction","Introduction",{"depth":114,"slug":118,"text":119},"update-user-information","Update User Information",{"depth":114,"slug":121,"text":122},"configure-acme-dns-authenticator","Configure ACME DNS Authenticator",{"depth":114,"slug":124,"text":125},"create-a-certificate-signing-request-csr","Create a Certificate Signing Request (CSR)",{"depth":114,"slug":127,"text":128},"generate-the-ssl-certificate","Generate the SSL Certificate",{"depth":114,"slug":130,"text":131},"activate-the-new-certificate","Activate the New Certificate",{"depth":114,"slug":133,"text":134},"verify-the-ssl-certificate","Verify the SSL Certificate",[100,101,102,103,104,105,106,107],[],{"title":95,"date":138,"draft":78},"2025-03-24",[100,101,102,103,104,105,106,107],"truenas-letsencrypt-ssl/index.md","migrate-to-entra-connect-p1",{"id":141,"data":143,"body":146,"filePath":147,"assetImports":148,"digest":153,"rendered":154,"legacyId":181},{"title":144,"date":145,"draft":78},"Migrate to Microsoft Entra Connect Part 1",["Date","2025-03-14T00:00:00.000Z"],"## Intro\r\n\r\nIf you are a Microsoft Entra user, they are encouraging upgrading Azure Active Directory Connect customers to migrate to Microsoft Entra Connect. Here are some steps to help migrate your existing configuration.\r\n\r\n## In-Place Upgrade or Swing Migration?\r\n\r\nAfter some careful consideration I settled on a Swing Migration to give me the most flexibility and backup in case something went wrong. Here's how Microsoft explains it:\r\n\r\n![Diagram of a Swing Server Migration](./stagingserver1.png)\r\n\r\n\r\n> For some customers, an in-place upgrade can impose a considerable risk to production in case there's an issue while upgrading and the server can't be rolled back. A single production server might also be impractical as the initial sync cycle might take multiple days, and during this time, no delta changes are processed.\r\n\r\n> The recommended method for these scenarios is to use a swing migration. You can use this method when you need to upgrade the Windows Server operating system. Additionally, you can use it when you plan to make substantial changes to your environment configuration, which need to be tested before they're pushed to production.\r\n\r\n## Backup Existing Configuration\r\n\r\nOpen Azure AD Connect on your existing server and you can export your working config for the second swing server\r\n\r\n![Export config from Azure AD Connect](./adconnect-exportsettings.png)\r\n\r\nIf you are using a fairly recent version of AD Connect it will export in JSON\r\n\r\n![Example JSON config](./adconnect-json.png)\r\n\r\n## Configuring TLS 1.2\r\n\r\nSetup a new Windows server VM where you will install Entra Connect. Before you can successfully install the application you must configure TLS on your server. Open Powershell ISE as Administrator and run this code on the swing server. This is writing 8 new entries to the Registry enabling TLS 1.2\r\n\r\n```powershell\r\nIf (-Not (Test-Path 'HKLM:\\SOFTWARE\\WOW6432Node\\Microsoft\\.NETFramework\\v4.0.30319'))\r\n{\r\n    New-Item 'HKLM:\\SOFTWARE\\WOW6432Node\\Microsoft\\.NETFramework\\v4.0.30319' -Force | Out-Null\r\n}\r\nNew-ItemProperty -Path 'HKLM:\\SOFTWARE\\WOW6432Node\\Microsoft\\.NETFramework\\v4.0.30319' -Name 'SystemDefaultTlsVersions' -Value '1' -PropertyType 'DWord' -Force | Out-Null\r\nNew-ItemProperty -Path 'HKLM:\\SOFTWARE\\WOW6432Node\\Microsoft\\.NETFramework\\v4.0.30319' -Name 'SchUseStrongCrypto' -Value '1' -PropertyType 'DWord' -Force | Out-Null\r\n\r\nIf (-Not (Test-Path 'HKLM:\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319'))\r\n{\r\n    New-Item 'HKLM:\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319' -Force | Out-Null\r\n}\r\nNew-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319' -Name 'SystemDefaultTlsVersions' -Value '1' -PropertyType 'DWord' -Force | Out-Null\r\nNew-ItemProperty -Path 'HKLM:\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319' -Name 'SchUseStrongCrypto' -Value '1' -PropertyType 'DWord' -Force | Out-Null\r\n\r\nIf (-Not (Test-Path 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server'))\r\n{\r\n    New-Item 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server' -Force | Out-Null\r\n}\r\nNew-ItemProperty -Path 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server' -Name 'Enabled' -Value '1' -PropertyType 'DWord' -Force | Out-Null\r\nNew-ItemProperty -Path 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server' -Name 'DisabledByDefault' -Value '0' -PropertyType 'DWord' -Force | Out-Null\r\n\r\nIf (-Not (Test-Path 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client'))\r\n{\r\n    New-Item 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client' -Force | Out-Null\r\n}\r\nNew-ItemProperty -Path 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client' -Name 'Enabled' -Value '1' -PropertyType 'DWord' -Force | Out-Null\r\nNew-ItemProperty -Path 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client' -Name 'DisabledByDefault' -Value '0' -PropertyType 'DWord' -Force | Out-Null\r\n\r\nWrite-Host 'TLS 1.2 has been enabled. You must restart the Windows Server for the changes to take affect.' -ForegroundColor Cyan\r\n```\r\n\r\n## Importing Configuration\r\n\r\nAfter TLS has been enabled, install the software and launch the executible. Walk through the wizard and you will reach a point where you can import your existing config\r\n\r\n![Import existing AD Connect Config](./entraconnect-import.png)\r\n\r\n## Stick around for Part 2\r\n\r\nWe will finish configuring Microsoft Entra Connect and performing a synchronization of user data.","src/content/blog/migrate-to-entra-connect-p1/index.md",[149,150,151,152],"./stagingserver1.png","./adconnect-exportsettings.png","./adconnect-json.png","./entraconnect-import.png","3cd48051d024ade3",{"html":155,"metadata":156},"\u003Ch2 id=\"intro\">Intro\u003C/h2>\n\u003Cp>If you are a Microsoft Entra user, they are encouraging upgrading Azure Active Directory Connect customers to migrate to Microsoft Entra Connect. Here are some steps to help migrate your existing configuration.\u003C/p>\n\u003Ch2 id=\"in-place-upgrade-or-swing-migration\">In-Place Upgrade or Swing Migration?\u003C/h2>\n\u003Cp>After some careful consideration I settled on a Swing Migration to give me the most flexibility and backup in case something went wrong. Here‚Äôs how Microsoft explains it:\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./stagingserver1.png&#x22;,&#x22;alt&#x22;:&#x22;Diagram of a Swing Server Migration&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Cblockquote>\n\u003Cp>For some customers, an in-place upgrade can impose a considerable risk to production in case there‚Äôs an issue while upgrading and the server can‚Äôt be rolled back. A single production server might also be impractical as the initial sync cycle might take multiple days, and during this time, no delta changes are processed.\u003C/p>\n\u003C/blockquote>\n\u003Cblockquote>\n\u003Cp>The recommended method for these scenarios is to use a swing migration. You can use this method when you need to upgrade the Windows Server operating system. Additionally, you can use it when you plan to make substantial changes to your environment configuration, which need to be tested before they‚Äôre pushed to production.\u003C/p>\n\u003C/blockquote>\n\u003Ch2 id=\"backup-existing-configuration\">Backup Existing Configuration\u003C/h2>\n\u003Cp>Open Azure AD Connect on your existing server and you can export your working config for the second swing server\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./adconnect-exportsettings.png&#x22;,&#x22;alt&#x22;:&#x22;Export config from Azure AD Connect&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Cp>If you are using a fairly recent version of AD Connect it will export in JSON\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./adconnect-json.png&#x22;,&#x22;alt&#x22;:&#x22;Example JSON config&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"configuring-tls-12\">Configuring TLS 1.2\u003C/h2>\n\u003Cp>Setup a new Windows server VM where you will install Entra Connect. Before you can successfully install the application you must configure TLS on your server. Open Powershell ISE as Administrator and run this code on the swing server. This is writing 8 new entries to the Registry enabling TLS 1.2\u003C/p>\n\u003Cpre class=\"astro-code css-variables\" style=\"background-color:var(--astro-code-background);color:var(--astro-code-foreground); overflow-x: auto;\" tabindex=\"0\" data-language=\"powershell\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-keyword)\">If\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\"> (\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">-Not\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\"> (\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\">Test-Path\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\"> 'HKLM:\\SOFTWARE\\WOW6432Node\\Microsoft\\.NETFramework\\v4.0.30319'\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-foreground)\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">    New-Item\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\"> 'HKLM:\\SOFTWARE\\WOW6432Node\\Microsoft\\.NETFramework\\v4.0.30319'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-foreground)\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">New-ItemProperty\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Path \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'HKLM:\\SOFTWARE\\WOW6432Node\\Microsoft\\.NETFramework\\v4.0.30319'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Name \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'SystemDefaultTlsVersions'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Value \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'1'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">PropertyType \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DWord'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">New-ItemProperty\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Path \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'HKLM:\\SOFTWARE\\WOW6432Node\\Microsoft\\.NETFramework\\v4.0.30319'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Name \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'SchUseStrongCrypto'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Value \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'1'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">PropertyType \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DWord'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-keyword)\">If\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\"> (\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">-Not\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\"> (\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\">Test-Path\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\"> 'HKLM:\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319'\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-foreground)\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">    New-Item\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\"> 'HKLM:\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-foreground)\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">New-ItemProperty\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Path \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'HKLM:\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Name \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'SystemDefaultTlsVersions'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Value \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'1'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">PropertyType \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DWord'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">New-ItemProperty\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Path \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'HKLM:\\SOFTWARE\\Microsoft\\.NETFramework\\v4.0.30319'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Name \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'SchUseStrongCrypto'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Value \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'1'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">PropertyType \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DWord'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-keyword)\">If\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\"> (\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">-Not\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\"> (\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\">Test-Path\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\"> 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server'\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-foreground)\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">    New-Item\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\"> 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-foreground)\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">New-ItemProperty\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Path \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Name \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'Enabled'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Value \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'1'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">PropertyType \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DWord'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">New-ItemProperty\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Path \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Server'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Name \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DisabledByDefault'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Value \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'0'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">PropertyType \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DWord'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-keyword)\">If\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\"> (\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">-Not\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\"> (\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\">Test-Path\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\"> 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client'\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-foreground)\">{\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">    New-Item\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\"> 'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-foreground)\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">New-ItemProperty\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Path \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Name \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'Enabled'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Value \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'1'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">PropertyType \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DWord'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">New-ItemProperty\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Path \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'HKLM:\\SYSTEM\\CurrentControlSet\\Control\\SecurityProviders\\SCHANNEL\\Protocols\\TLS 1.2\\Client'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Name \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DisabledByDefault'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Value \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'0'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">PropertyType \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\">'DWord'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">Force \u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\">|\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-function)\"> Out-Null\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">Write-Host\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string-expression)\"> 'TLS 1.2 has been enabled. You must restart the Windows Server for the changes to take affect.'\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-keyword)\"> -\u003C/span>\u003Cspan style=\"color:var(--astro-code-foreground)\">ForegroundColor Cyan\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"importing-configuration\">Importing Configuration\u003C/h2>\n\u003Cp>After TLS has been enabled, install the software and launch the executible. Walk through the wizard and you will reach a point where you can import your existing config\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./entraconnect-import.png&#x22;,&#x22;alt&#x22;:&#x22;Import existing AD Connect Config&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"stick-around-for-part-2\">Stick around for Part 2\u003C/h2>\n\u003Cp>We will finish configuring Microsoft Entra Connect and performing a synchronization of user data.\u003C/p>",{"headings":157,"localImagePaths":176,"remoteImagePaths":177,"frontmatter":178,"imagePaths":180},[158,161,164,167,170,173],{"depth":114,"slug":159,"text":160},"intro","Intro",{"depth":114,"slug":162,"text":163},"in-place-upgrade-or-swing-migration","In-Place Upgrade or Swing Migration?",{"depth":114,"slug":165,"text":166},"backup-existing-configuration","Backup Existing Configuration",{"depth":114,"slug":168,"text":169},"configuring-tls-12","Configuring TLS 1.2",{"depth":114,"slug":171,"text":172},"importing-configuration","Importing Configuration",{"depth":114,"slug":174,"text":175},"stick-around-for-part-2","Stick around for Part 2",[149,150,151,152],[],{"title":144,"date":179,"draft":78},"2025-03-14",[149,150,151,152],"migrate-to-entra-connect-p1/index.md","docker-container-nfs",{"id":182,"data":184,"body":187,"filePath":188,"assetImports":189,"digest":194,"rendered":195,"legacyId":223},{"title":185,"date":186,"draft":78},"Running Uptime Kuma in a Docker Container with NFSv4 Storage",["Date","2024-08-22T00:00:00.000Z"],"## Introduction\r\n\r\nIn this guide, I‚Äôll walk you through setting up Uptime Kuma, a self-hosted monitoring tool, in a Docker container using NFSv4 for persistent storage. This setup is part of my homelab, where I experiment with containerization and various technologies.\r\n\r\n## Prerequisites\r\n\r\nBefore starting, ensure you have the following:\r\n\r\n- **NFS Server**: I‚Äôm using TrueNAS on an HP EliteDesk.\r\n- **Docker Host**: My Docker server runs on a separate HP EliteDesk.\r\n\r\n## Step 1: Export an NFS Share\r\n\r\nBegin by exporting an NFS share from your NFS server. In my case, I exported the directory `/mnt/pool0/nfs/docker-volumes` from TrueNAS. \r\n\r\nNext, SSH into your Docker server and mount the NFS share. For example:\r\n\r\n```bash\r\nsudo mount -t nfs4 lilmt.qth.nv9p.com:/mnt/pool0/nfs/docker-volumes /mnt/nfs\r\n```\r\n\r\nOnce mounted, create a directory for Uptime Kuma‚Äôs persistent data:\r\n\r\n```bash\r\nmkdir -p /mnt/nfs/uptimekuma-data\r\n```\r\n\r\nThis directory will store all the container‚Äôs data.\r\n\r\n## Step 2: Create a Volume in Portainer\r\n\r\nI use Portainer to manage my Docker containers. To create a volume:\r\n\r\n1. Access the Portainer web interface.\r\n2. Navigate to **Volumes** and click **Add Volume**.\r\n3. Fill in the NFS server details, including the mount point (`/mnt/nfs/uptimekuma-data`), and click **Create the volume**.\r\n\r\n![Create NFS volume via Portainer](./create-volume.png)\r\n\r\n## Step 3: Deploy the Uptime Kuma Container\r\n\r\nNow, create the Uptime Kuma container:\r\n\r\n1. Go to the **Containers** section in Portainer and click **Add Container**.\r\n2. Name the container and use the official Uptime Kuma image: `louislam/uptime-kuma`.\r\n3. Under **Network**, map port `3000` on both the host and container.\r\n4. Scroll to the **Volumes** section and map the NFS volume:\r\n    - Set the container path to `/app/data`.\r\n    - Select the NFS volume created earlier.\r\n\r\nFinally, click **Deploy the container**.\r\n\r\n![Create Uptimekuma Container in Docker](./create-container.png)\r\n\r\n![Add NFS volume to container](./add-nfs-volume.png)\r\n\r\n## Step 4: Access Uptime Kuma\r\n\r\nOnce the container is running, navigate to your Docker server‚Äôs IP address on port `3000` to access Uptime Kuma. For example:\r\n\r\n```\r\nhttp://docker-01.qth.nv9p.com:3000\r\n```\r\n\r\nYou should see the Uptime Kuma interface, ready for configuration.\r\n\r\n![Monitoring website via Uptime Kuma as a docker container](./uptime-kuma.png)\r\n\r\n## Conclusion\r\n\r\nBy leveraging NFSv4 for persistent storage, you can efficiently manage Uptime Kuma in a Docker container. This setup ensures data persistence and simplifies container management using Portainer. Happy monitoring!","src/content/blog/docker-container-nfs/index.md",[190,191,192,193],"./create-volume.png","./create-container.png","./add-nfs-volume.png","./uptime-kuma.png","ad04a20d960964ce",{"html":196,"metadata":197},"\u003Ch2 id=\"introduction\">Introduction\u003C/h2>\n\u003Cp>In this guide, I‚Äôll walk you through setting up Uptime Kuma, a self-hosted monitoring tool, in a Docker container using NFSv4 for persistent storage. This setup is part of my homelab, where I experiment with containerization and various technologies.\u003C/p>\n\u003Ch2 id=\"prerequisites\">Prerequisites\u003C/h2>\n\u003Cp>Before starting, ensure you have the following:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>NFS Server\u003C/strong>: I‚Äôm using TrueNAS on an HP EliteDesk.\u003C/li>\n\u003Cli>\u003Cstrong>Docker Host\u003C/strong>: My Docker server runs on a separate HP EliteDesk.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"step-1-export-an-nfs-share\">Step 1: Export an NFS Share\u003C/h2>\n\u003Cp>Begin by exporting an NFS share from your NFS server. In my case, I exported the directory \u003Ccode>/mnt/pool0/nfs/docker-volumes\u003C/code> from TrueNAS.\u003C/p>\n\u003Cp>Next, SSH into your Docker server and mount the NFS share. For example:\u003C/p>\n\u003Cpre class=\"astro-code css-variables\" style=\"background-color:var(--astro-code-background);color:var(--astro-code-foreground); overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">sudo\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string)\"> mount\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string)\"> -t\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string)\"> nfs4\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string)\"> lilmt.qth.nv9p.com:/mnt/pool0/nfs/docker-volumes\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string)\"> /mnt/nfs\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Once mounted, create a directory for Uptime Kuma‚Äôs persistent data:\u003C/p>\n\u003Cpre class=\"astro-code css-variables\" style=\"background-color:var(--astro-code-background);color:var(--astro-code-foreground); overflow-x: auto;\" tabindex=\"0\" data-language=\"bash\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:var(--astro-code-token-function)\">mkdir\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string)\"> -p\u003C/span>\u003Cspan style=\"color:var(--astro-code-token-string)\"> /mnt/nfs/uptimekuma-data\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>This directory will store all the container‚Äôs data.\u003C/p>\n\u003Ch2 id=\"step-2-create-a-volume-in-portainer\">Step 2: Create a Volume in Portainer\u003C/h2>\n\u003Cp>I use Portainer to manage my Docker containers. To create a volume:\u003C/p>\n\u003Col>\n\u003Cli>Access the Portainer web interface.\u003C/li>\n\u003Cli>Navigate to \u003Cstrong>Volumes\u003C/strong> and click \u003Cstrong>Add Volume\u003C/strong>.\u003C/li>\n\u003Cli>Fill in the NFS server details, including the mount point (\u003Ccode>/mnt/nfs/uptimekuma-data\u003C/code>), and click \u003Cstrong>Create the volume\u003C/strong>.\u003C/li>\n\u003C/ol>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./create-volume.png&#x22;,&#x22;alt&#x22;:&#x22;Create NFS volume via Portainer&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"step-3-deploy-the-uptime-kuma-container\">Step 3: Deploy the Uptime Kuma Container\u003C/h2>\n\u003Cp>Now, create the Uptime Kuma container:\u003C/p>\n\u003Col>\n\u003Cli>Go to the \u003Cstrong>Containers\u003C/strong> section in Portainer and click \u003Cstrong>Add Container\u003C/strong>.\u003C/li>\n\u003Cli>Name the container and use the official Uptime Kuma image: \u003Ccode>louislam/uptime-kuma\u003C/code>.\u003C/li>\n\u003Cli>Under \u003Cstrong>Network\u003C/strong>, map port \u003Ccode>3000\u003C/code> on both the host and container.\u003C/li>\n\u003Cli>Scroll to the \u003Cstrong>Volumes\u003C/strong> section and map the NFS volume:\n\u003Cul>\n\u003Cli>Set the container path to \u003Ccode>/app/data\u003C/code>.\u003C/li>\n\u003Cli>Select the NFS volume created earlier.\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ol>\n\u003Cp>Finally, click \u003Cstrong>Deploy the container\u003C/strong>.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./create-container.png&#x22;,&#x22;alt&#x22;:&#x22;Create Uptimekuma Container in Docker&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./add-nfs-volume.png&#x22;,&#x22;alt&#x22;:&#x22;Add NFS volume to container&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"step-4-access-uptime-kuma\">Step 4: Access Uptime Kuma\u003C/h2>\n\u003Cp>Once the container is running, navigate to your Docker server‚Äôs IP address on port \u003Ccode>3000\u003C/code> to access Uptime Kuma. For example:\u003C/p>\n\u003Cpre class=\"astro-code css-variables\" style=\"background-color:var(--astro-code-background);color:var(--astro-code-foreground); overflow-x: auto;\" tabindex=\"0\" data-language=\"plaintext\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan>http://docker-01.qth.nv9p.com:3000\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>You should see the Uptime Kuma interface, ready for configuration.\u003C/p>\n\u003Cp>\u003Cimg __ASTRO_IMAGE_=\"{&#x22;src&#x22;:&#x22;./uptime-kuma.png&#x22;,&#x22;alt&#x22;:&#x22;Monitoring website via Uptime Kuma as a docker container&#x22;,&#x22;index&#x22;:0}\">\u003C/p>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>By leveraging NFSv4 for persistent storage, you can efficiently manage Uptime Kuma in a Docker container. This setup ensures data persistence and simplifies container management using Portainer. Happy monitoring!\u003C/p>",{"headings":198,"localImagePaths":218,"remoteImagePaths":219,"frontmatter":220,"imagePaths":222},[199,200,203,206,209,212,215],{"depth":114,"slug":115,"text":116},{"depth":114,"slug":201,"text":202},"prerequisites","Prerequisites",{"depth":114,"slug":204,"text":205},"step-1-export-an-nfs-share","Step 1: Export an NFS Share",{"depth":114,"slug":207,"text":208},"step-2-create-a-volume-in-portainer","Step 2: Create a Volume in Portainer",{"depth":114,"slug":210,"text":211},"step-3-deploy-the-uptime-kuma-container","Step 3: Deploy the Uptime Kuma Container",{"depth":114,"slug":213,"text":214},"step-4-access-uptime-kuma","Step 4: Access Uptime Kuma",{"depth":114,"slug":216,"text":217},"conclusion","Conclusion",[190,191,192,193],[],{"title":185,"date":221,"draft":78},"2024-08-22",[190,191,192,193],"docker-container-nfs/index.md"]